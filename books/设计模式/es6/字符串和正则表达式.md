## 字符串和正则表达式

字符串无疑是编程中最重要的数据类型之一.作为扩展，正则表达式也是很重要的，因为它让开发者可以更加高效的控制字符串.ECMAScript6通过为字符串和正则表达式增加新的能力和缺失多年的功能来改进它们.

### Unicode支持

#### Understanding ECMAScript6

*《understanding es6: string and regular expressions》*

在ES6之前，JavaScript假定每个字符都是16bit的字节序列，也叫作`code unit`。所有的字符串属性和方法，像`length`属性和`charAt()`方法，都是基于这个16bit`code unit`创建。

##### UTF-16 Code Points

16位unicode不能让全世界每个字符都具有全局唯一标识符(globally unique identifiers)。Unicode全局唯一标识符也叫做`code points`，是以0开始的数字。

UTF-16中的首个2<sup>16</sup>`code points`会代表一个16-bit`code units`.这个范围叫做`Basic Multilingual Plane(BMP)`。所有超出这个范围的都叫做`supplementary planes`.UTF-16解决不能用16bits代表的字符使用的办法是：引入`surrogate pair`来代表两个16bit的`code units`.

在ES5中，所有的字符串操作都基于16bit`code units`。意味着你的UTF-16编码字符串如果包含`surrogate pair`，你对它的操作可能会获得意外的结果:

```javascript
let text = "𠮷";

console.log(text.length);        // 2
console.log(/^.$/.test(text));   // false
console.log(text.charAt(0));     // ""
console.log(text.charAt(1));     // ""
console.log(text.charCodeAt(0)); // 55362
console.log(text.charCodeAt(1)); // 57271
```

